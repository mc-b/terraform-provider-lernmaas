---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "maas_vm_instance Resource - terraform-provider-maas"
subcategory: ""
description: |-
  Provides a resource to create and deploy VMs in MAAS, based on the specified parameters. If no parameters are given, a random machine will be created and deployed using the defaults.
---

# maas_vm_instance (Resource)

Provides a resource to create and deploy VMs in MAAS, based on the specified parameters. If no parameters are given, a random machine will be created and deployed using the defaults.

## Example Usage

```terraform
# all kvm hosts
data "maas_vm_hosts" "vm-hosts" {
  id = "rack-01"
}

# 2 vms for vm host
resource "maas_vm_instance" "base" {
  count       = length(data.maas_vm_hosts.vm-hosts.no) * 2
  kvm_no      = data.maas_vm_hosts.vm-hosts.no[count.index % length(data.maas_vm_hosts.vm-hosts.no)]
  hostname    = "base-${format("%02d", count.index + 10)}"
  description = "student ${format("%02d", count.index + 1)}"
  zone        = "10-6-37-0"
  pool        = "webshop"
  user_data   = data.template_file.userdata.rendered
}

# 1 vm on vm host with highest memory
resource "maas_vm_instance" "order" {
  kvm_no    = data.maas_vm_hosts.vm-hosts.recommended
  cpu_count = 2
  memory    = 2048
  storage   = 12
  hostname  = "base-61"
  zone      = "10-6-37-0"
  # pool = "webshop"
  # user_data = data.template_file.userdata.rendered
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `kvm_no` (Number) The number of the kvm host.

### Optional

- `cpu_count` (Number) The number of cores used to allocate the MAAS machine.
- `description` (String) The Description.
- `hostname` (String) The hostname of the MAAS machine to be allocated.
- `memory` (Number) The RAM memory size (in MB) used to allocate the MAAS machine.
- `pool` (String) The resource pool name of the MAAS machine to be allocated.
- `storage` (Number) The VM local storage (in GBytes).
- `tags` (Set of String) A set of tag names that must be assigned on the MAAS machine to be allocated.
- `user_data` (String) Cloud-init user data script that gets run on the machine once it has deployed. A good practice is to set this with `file.
- `zone` (String) The zone name of the MAAS machine to be allocated.

### Read-Only

- `fqdn` (String) The deployed MAAS machine FQDN.
- `id` (String) The ID of this resource.
- `ip_addresses` (Set of String) The ip addresses.

## Import

Import is supported using the following syntax:

```shell
# VM instances can be imported using the identifier of the MAAS machine (hostname). e.g.
$ terraform import maas_vm_instance.vm k0s40
```
